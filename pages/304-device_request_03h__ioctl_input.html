<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Device Request 03H: IOCTL Input - TECH Help!</title><link rel="stylesheet" type="text/css" href="style.css"><meta http-equiv="X-UA-Compatible" content="IE=Edge"></head><body><h1>Device Request 03H: IOCTL Input</h1><pre>                                                          <a href="328-_blk_.html">◄Blk►</a> <a href="327-_chr_.html">◄Chr►</a> <a href="329-_irw_.html">◄IRW►</a>
 This tells the driver to send some IOCTL data to DOS.

<span class="c2">DevReq03Rec</span>
  Offset Size Contents
  ▀▀▀▀▀▀ ▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀
   +0      1  <span class="c1">bLen</span>         14H (length of this request packet)
   +1      1  <span class="c1">bUnitNo</span>      unit number
   +2      1  <span class="c1">bCmd</span>         <span class="c2">03H</span> (command code)
   +3      2  <span class="c1">rStatus</span>      OUTPUT: <a href="325-device_status_word.html">Device Status Word</a> must fill before exit
   +5H     8  <span class="c1">res</span>          (reserved)
  +0dH     1  <span class="c1">bData</span>        (not used)
  +0eH     4  <span class="c1">pfBuffer</span>     INPUT: buffer address
  +12H     2  <span class="c1">wLen</span>         INPUT: size of data requested (in bytes)
                           OUTPUT: actual size of data being returned
          20               size of this structure

     <span class="c1">rStatus</span>  On exit, the driver must place a <a href="325-device_status_word.html">DevStatusWord</a> here.  Always
              set the Done bit (<span class="c1">bit 8</span>).  On an error, set the Done bit and
              the Error bit (<span class="c1">bit 15</span>) and put a <a href="326-device_driver_errors.html">Device Error Code</a> in the low
              byte.

    <span class="c1">pfBuffer</span>  is the address of a buffer in which the driver may place the
              requested data.  You must not store more than <span class="c1">wLen</span> bytes here.

        <span class="c1">wLen</span>  On entry, this specifies the size of the data DOS is
              requesting, in bytes.

              On exit, you must store the actual size of the data that you
              supplied.

   Notes: ■ The layout of the data in <span class="c1">pfBuffer</span> is entirely device-specific
            and will vary from device to device.

          ■ There is no way to specify just what type of data is requested.
            See <a href="318-device_request_13h__generic_ioctl_request.html">DvRq 13H</a> (generic IOCTL) for a more flexible system.

          ■ This is the device driver &quot;catch-point&quot; for DOS fns <a href="448-dos_fn_4402h__ioctl_receive_control_data_from_char_device.html">4402H</a> and
            <a href="450-dos_fn_4404h__ioctl_receive_control_data_from_block_device.html">4404H</a> (receive IOCTL data).

See Also: <a href="300-device_requests.html">Device Requests</a>
          <a href="324-device_request_header.html">DevRequestHdrRec</a>
          <a href="298-installable_device_drivers.html">Installable Device Drivers</a>
                                    <span class="c3">-♦-</span></pre></body></html>
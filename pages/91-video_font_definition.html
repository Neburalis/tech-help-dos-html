<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Video Font Definition - TECH Help!</title><link rel="stylesheet" type="text/css" href="style.css"><meta http-equiv="X-UA-Compatible" content="IE=Edge"></head><body><h1>Video Font Definition</h1><pre> ┌76543210┐             ┌76543210┐             ┌76543210┐
 │        │=00000000=<span class="c2">00</span> │        │=00000000=<span class="c3">00</span> │        │=00000000=00
 │        │=00000000=<span class="c2">00</span> │        │=00000000=<span class="c3">00</span> │        │=00000000=00
 │  ■■■   │=00<span class="c2">111</span>000=<span class="c2">38</span> │■■■■■■  │=<span class="c3">111111</span>00=<span class="c3">FC</span> │    ■■  │=0000<span class="c2">11</span>00=0C
 │ ■■ ■■  │=0<span class="c2">11</span>0<span class="c2">11</span>00=<span class="c2">6C</span> │ ■■  ■■ │=0<span class="c3">11</span>00<span class="c3">11</span>0=<span class="c3">66</span> │    ■■  │=0000<span class="c2">11</span>00=0C
 │■■   ■■ │=<span class="c2">11</span>000<span class="c2">11</span>0=<span class="c2">C6</span> │ ■■  ■■ │=0<span class="c3">11</span>00<span class="c3">11</span>0=<span class="c3">66</span> │        │=00000000=00
 │■■   ■■ │=<span class="c2">11</span>000<span class="c2">11</span>0=<span class="c2">C6</span> │ ■■  ■■ │=0<span class="c3">11</span>00<span class="c3">11</span>0=<span class="c3">66</span> │   ■■■  │=000<span class="c2">111</span>00=1C
 │■■   ■■ │=<span class="c2">11</span>000<span class="c2">11</span>0=<span class="c2">C6</span> │ ■■■■■  │=0<span class="c3">11111</span>00=<span class="c3">7C</span> │    ■■  │=0000<span class="c2">11</span>00=0C
 │■■■■■■■ │=<span class="c2">1111111</span>0=<span class="c2">FE</span> │ ■■  ■■ │=0<span class="c3">11</span>00<span class="c3">11</span>0=<span class="c3">66</span> │    ■■  │=0000<span class="c2">11</span>00=0C
 │■■   ■■ │=<span class="c2">11</span>000<span class="c2">11</span>0=<span class="c2">C6</span> │ ■■  ■■ │=0<span class="c3">11</span>00<span class="c3">11</span>0=<span class="c3">66</span> │    ■■  │=0000<span class="c2">11</span>00=0C
 │■■   ■■ │=<span class="c2">11</span>000<span class="c2">11</span>0=<span class="c2">C6</span> │ ■■  ■■ │=0<span class="c3">11</span>00<span class="c3">11</span>0=<span class="c3">66</span> │    ■■  │=0000<span class="c2">11</span>00=0C
 │■■   ■■ │=<span class="c2">11</span>000<span class="c2">11</span>0=<span class="c2">C6</span> │ ■■  ■■ │=0<span class="c3">11</span>00<span class="c3">11</span>0=<span class="c3">66</span> │    ■■  │=0000<span class="c2">11</span>00=0C
 ├■■   ■■ ┤=<span class="c2">11</span>000<span class="c2">11</span>0=<span class="c2">C6</span> ├■■■■■■  ┤=<span class="c3">111111</span>00=<span class="c3">FC</span> ├■■  ■■  ┤=<span class="c2">11</span>00<span class="c2">11</span>00=CC
 │        │=00000000=<span class="c2">00</span> │        │=00000000=<span class="c3">00</span> │■■  ■■  │=<span class="c2">11</span>00<span class="c2">11</span>00=CC
 │        │=00000000=<span class="c2">00</span> │        │=00000000=<span class="c3">00</span> │ ■■■■   │=0<span class="c2">1111</span>000=78
 │        │=00000000=<span class="c2">00</span> │        │=00000000=<span class="c3">00</span> │        │=00000000=00
 │        │=00000000=<span class="c2">00</span> │        │=00000000=<span class="c3">00</span> │        │=00000000=00
 └────────┘           <span class="c2">║</span> └────────┘           <span class="c3">║</span> └────────┘
 <span class="c2">╔════════════════════╝</span>                      <span class="c3">║</span>
<span class="c3">╔</span><span class="c2">║</span><span class="c3">═══════════════════════════════════════════╝</span>
<span class="c3">║</span><span class="c2">║</span> c000:<span class="c1">n</span>+(<span class="c1">m</span>*0)  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00 ASCII  0=
<span class="c3">║</span><span class="c2">║</span> c000:<span class="c1">n</span>+(<span class="c1">m</span>*1)  00,00,7E,81,A5,81,81,BD,99,81,81,7E,00,00,00,00 ASCII  1=☺
<span class="c3">║</span><span class="c2">║</span> c000:<span class="c1">n</span>+(<span class="c1">m</span>*2)  00,00,7C,FE,FE,D6,FE,FE,BA,C6,FE,7C,00,00,00,00 ASCII  2=☻
<span class="c3">║</span><span class="c2">║</span>           .
<span class="c3">║</span><span class="c2">║</span>           :
<span class="c3">║</span><span class="c2">╚►</span>c000:<span class="c1">n</span>+(<span class="c1">m</span>*65) <span class="c2">00,00,38,6C,C6,C6,C6,FE,C6,C6,C6,C6,00,00,00,00</span> ASCII 65=<span class="c2">A</span>
<span class="c3">╚═►</span>c000:<span class="c1">n</span>+(<span class="c1">m</span>*66) <span class="c3">00,00,FC,66,66,66,7C,66,66,66,66,FC,00,00,00,00</span> ASCII 66=<span class="c3">B</span>
             .
             :
 In the 8x16 font above, each character of the ASCII table is represented
 by 16 bytes.  In each of those 16 bytes, each bit represents one pixel,
 with the high-order bit representing the leftmost of eight pixels.

 On an EGA or VGA you may obtain the address of any ROM-defined font via
 <a href="166-int_10h_1130h__get_current_character_generator_info.html">INT 10H 1130H</a>.  The definition of a particular ASCII character, <span class="c1">c</span>, starts
 <span class="c1">c</span>*<span class="c1">m</span> bytes from the returned address (where <span class="c1">m</span> is the height of the
 character matrix and thus the bytes-per character--usually 8, 14, or 16).

 On a CGA or MDA, the font data is internal to the (inaccessible) character
 generator.  However, the data layout used in the <a href="257-int_1fh__cga_graphics_character_font_pointer.html">INT 1fH</a> vector (which
 defines ASCII characters &gt; 127 for CGA graphics modes) is laid out as an
 8x8 font.

 ┌76543210┐              ┌76543210┐
 │  ■■■■  │=00<span class="c2">1111</span>00=<span class="c2">3C</span>  │        │=00000000=<span class="c3">00</span>
 │ ■■  ■■ │=0<span class="c2">11</span>00<span class="c2">11</span>0=<span class="c2">66</span>  │■■   ■■ │=<span class="c3">11</span>000<span class="c3">11</span>0=<span class="c3">C6</span>
 │■■      │=<span class="c2">11</span>000000=<span class="c2">C0</span>  │        │=00000000=<span class="c3">00</span>
 │ ■■  ■■ │=0<span class="c2">11</span>00<span class="c2">11</span>0=<span class="c2">66</span>  │■■   ■■ │=<span class="c3">11</span>000<span class="c3">11</span>0=<span class="c3">C6</span>
 │  ■■■■  │=00<span class="c2">1111</span>00=<span class="c2">3C</span>  │■■   ■■ │=<span class="c3">11</span>000<span class="c3">11</span>0=<span class="c3">C6</span>
 │   ■■   │=000<span class="c2">11</span>000=<span class="c2">18</span>  │■■  ■■■ │=<span class="c3">11</span>00<span class="c3">111</span>0=<span class="c3">CE</span>
 │■■  ■■  │=<span class="c2">11</span>00<span class="c2">11</span>00=<span class="c2">CC</span>  │ ■■■ ■■ │=0<span class="c3">111</span>0<span class="c3">11</span>0=<span class="c3">76</span>
 │ ■■■■   │=0<span class="c2">1111</span>000=<span class="c2">78</span>  │        │=00000000=<span class="c3">00</span>
 └────────┘           <span class="c2">║</span>  └────────┘          <span class="c3">║</span>
 <span class="c2">╔════════════════════╝</span>                      <span class="c3">║</span>
<span class="c3">╔</span><span class="c2">║</span><span class="c3">═══════════════════════════════════════════╝</span>
<span class="c3">║</span><span class="c2">╚►</span>[0:7c]+(8*0)   <span class="c2">3C,66,C0,66,3C,18,CC,78</span>  ASCII 128=<span class="c2">Ç</span>
<span class="c3">╚═►</span>[0:7c]+(8*1)   <span class="c3">00,C6,00,C6,C6,CE,76,00</span>  ASCII 129=<span class="c3">ü</span>
             .
             :
 On EGAs and VGAs, the <a href="260-int_43h__ega_vga_graphics_character_font_pointer.html">INT 43H</a> vector points to a table of character
 definitions for graphics mode.  The BIOS refers to the word at 0040:85 in
 the <a href="93-rom_bios_variables.html">BIOS Data Area</a> to determine the size of each character definition.

<span class="c2">█▌VGA Implied 9th Bit▐█</span>
  When displaying in text mode, the VGA uses an internally-handled 720-
  pixel-wide screen width (in graphics mode, 640 is the highest supported
  width).  Thus, VGA characters are really 9 pixels wide.  The 9th pixel is
  usually displayed as blank (0).

  However, certain <a href="49-box__line___special_characters.html">Box &amp; Special Characters</a> would look bad if the rightmost
  dot were blank.  So characters <span class="c2">c0H</span> through <span class="c2">dfH</span> are given special treatment
  by the VGA character generator.  On these characters, the 8th bit is
  <span class="c1">extended</span> into the 9th position.  Examine the <a href="47-character_set_matrix.html">Character Set Matrix</a> to
  verify that all of these characters are box-and-line characters which must
  connect on the right side.  Although you can turn this off this &quot;9th-bit
  extension&quot; feature (via ATC register 10H, bit 2; see <a href="899-enhanced_graphics_adapter_i_o_ports.html">EGA I/O Ports</a>), there
  is no way to select a different range.

<span class="c2">█▌Dynamic Character Redefinition▐█</span>
  You may be aware of a wave of semi-graphical text-mode applications (such
  as Norton Utilities and Central Point tools).  These programs redefine
  certain characters to look like checkboxes, round &quot;radio buttons&quot; and so
  forth.  The most interesting idea is the &quot;semi-graphical&quot; mouse pointer.

  This appears miraculous at first, but is technically not too difficult.
  You can use <a href="152-int_10h_1100h__load_user_defined_font.html">INT 10H 1100H</a> to modify the &quot;bank 0&quot; character definitions to
  instantly change the definition of a character.  The trick in tracking a
  &quot;graphical mouse cursor&quot; is to replace a 2x2 character matrix at the mouse
  position with some little-used characters (say, d0H-d3H).  Then redefine
  those characters so that they look a lot like the characters they replace,
  except that a mouse pointer overlays them.

  Actually, the BIOS font-redefinition interface may be a bit too slow on
  some VGAs, so programmers use direct port I/O to make the character-
  generator RAM accessible and programmable on-the-fly.

  When choosing which characters to redefine, you must keep in mind the
  &quot;9th-bit extension&quot; described above; if you just pick some arbitrary
  characters, your mouse pointer will appear to have &quot;seams&quot; when displayed
  on VGA screens.  Only characters c0H-dfH will fill the gaps.

  <span class="c2">Programming for Direct Access to Character Generator RAM</span>
  The following sequence sets up the EGA and VGA for accessing character-
  generator memory.  See <a href="899-enhanced_graphics_adapter_i_o_ports.html">EGA I/O Ports</a> for related information.

    out 3c4H, 0402H   Mask reg; enable write to map 2
    out 3c4H, 0704H   Memory Mode reg ; alpha, ext mem, non-interleaved
    out 3ceH, 0005H   Graphics Mode reg; non-interleaved access
    out 3ceH, 0406H   Graphics Misc reg; map char gen RAM to a000:0
    out 3ceH, 0204H   Graphics ReadMapSelect reg; enable read chargen RAM

  After these OUTs, the font data begins at a000:0 and the first byte of
  font data for a character begins at the character's ASCII value * 32.
  After reading or writing the font data, the following sequence restores
  the EGA/VGA to normal operations:

    out 3c4H, 0302H   Mask reg; disable write to map 2
    out 3c4H, 0304H   Memory Mode reg; alpha, ext mem, interleaved
    out 3ceH, 1005H   Graphics Mode reg; interleaved access
    out 3ceH, 0e06H   Graphics Misc reg; regen buffer to b800:0
    out 3ceH, 0004H   Graphics ReadMapSelect reg; disable read chargen RAM

See Also: <a href="67-enhanced_graphics_adapter__ega_.html">EGA</a>  <a href="70-video_graphics_array__vga_.html">VGA</a>
          <a href="899-enhanced_graphics_adapter_i_o_ports.html">EGA I/O Ports</a>
          <a href="900-video_graphics_array_i_o_ports.html">VGA I/O Ports</a>
          <a href="114-video_modes.html">Video Modes</a>
                                    <span class="c3">-♦-</span></pre></body></html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Device Request 08H: Output (Write Data to Device) - TECH Help!</title><link rel="stylesheet" type="text/css" href="style.css"><meta http-equiv="X-UA-Compatible" content="IE=Edge"></head><body><h1>Device Request 08H: Output (Write Data to Device)</h1><pre>                                                                <a href="328-_blk_.html">◄Blk►</a> <a href="327-_chr_.html">◄Chr►</a>
 This tells the driver to write data to the device.

<span class="c2">DevReq08Rec</span>
  Offset Size Contents
  ▀▀▀▀▀▀ ▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀
   +0      1  <span class="c1">bLen</span>         20H or 14H (length of this request packet)
   +1      1  <span class="c1">bUnitNo</span>      (not used)
   +2      1  <span class="c1">bCmd</span>         <span class="c2">08H</span> (command code)
   +3      2  <span class="c1">rStatus</span>      OUTPUT: <a href="325-device_status_word.html">Device Status Word</a> must fill before exit
   +5H     8  <span class="c1">res</span>          (reserved)
  +0dH     1  <span class="c1">bMediaID</span>     INPUT: <a href="370-media_descriptor.html">Media Descriptor</a> DOS thinks is there
  +0eH     4  <span class="c1">pfBuffer</span>     INPUT: buffer address
  +12H     2  <span class="c1">wWriteSize</span>   INPUT: number of bytes or sectors to write
                           OUTPUT: bytes or sectors actually written
                           <span class="c2">────────────────────────────── Block Devices Only</span>
  +16H     2  <span class="c1">wStartSect</span>   INPUT: starting sector (<span class="c2">ffffH</span>=use <span class="c1">lBigSect</span>)
  +18H     4  <span class="c1">pfVolID</span>      OUTPUT: addr of Volume ID for this unit/media
  +1cH     4  <span class="c1">lBigSect</span>     INPUT: starting sector (when <span class="c1">wStartSect</span>=ffffH)
          32               size of this structure

     <span class="c1">rStatus</span>  On exit, the driver must place a <a href="325-device_status_word.html">DevStatusWord</a> here.  Always
              set the Done bit (<span class="c1">bit 8</span>).  On an error, set the Done bit and
              the Error bit (<span class="c1">bit 15</span>) and put a <a href="326-device_driver_errors.html">Device Error Code</a> in the low
              byte.

    <span class="c1">bMediaID</span>  On entry, this contains the <a href="370-media_descriptor.html">Media Descriptor</a> byte of the disk
              that DOS thinks is in the drive.  Used by block devices only.

    <span class="c1">pfBuffer</span>  is the address of a buffer in which the driver may place the
              requested data.  You must not store more than <span class="c1">wReadSize</span> bytes
              (or sectors of block devices) here.

  <span class="c1">wWriteSize</span>  on entry, specifies how much data to transfer from <span class="c1">pfBuffer</span> to
              the device:
                <span class="c2">Character devices</span>: requested number of bytes to write
                <span class="c2">Block devices</span>: requested number of sectors to write

              On return, fill this with the actual amount of data you
              transferred (bytes or sectors)
              <span class="c2">─────────────────────────────────────────── Block Devices Only</span>
  <span class="c1">wStartSect</span>  Logical sector number to start writing (see <a href="565-int_25h_26h__absolute_disk_read_write.html">INT 26H</a>).  If the
              sector number is larger than 65,535, this will contain ffffH
              and you should use <span class="c1">lBigSect</span> as the 32-bit starting sector
              number.  Used by block devices only.

     <span class="c1">pfVolID</span>  Block devices which return <a href="326-device_driver_errors.html">Device Error Code</a> of 0fH should set
              this to the address of an ASCIIZ<a href="913-qasciiz.html">▲</a> volume ID of the disk that
              should be in the drive (so DOS can prompt to insert that
              disk).  Used by block devices only.

    <span class="c1">lBigSect</span>  When DOS requests a logical sector number larger than 65,535,
              it sets <span class="c1">wStartSect</span> to ffffH and puts the actual desired
              starting sector number in here.  Used by block devices only.

   Notes: ■ It is up to the driver to translate the &quot;logical sector number&quot;
            to head/track/sector values actually used on the device and to
            access sequential sectors using that numbering scheme.  See
            <a href="565-int_25h_26h__absolute_disk_read_write.html">INT 26H</a> for the standard way to do this.

          ■ Driver request <a href="310-device_request_09h__output__write_verify_data_to_device_.html">DvRq 09H</a> is identical in every way, except that
            the driver is expected to verify the accuracy of the data
            written.

          ■ This is the device driver &quot;catch-point&quot; for DOS write fns such
            as <a href="439-dos_fn_40h__write_to_file_via_handle.html">40H</a> (write to file or device).

See Also: <a href="300-device_requests.html">Device Requests</a>
          <a href="324-device_request_header.html">DevRequestHdrRec</a>
          <a href="298-installable_device_drivers.html">Installable Device Drivers</a>
                                    <span class="c3">-♦-</span></pre></body></html>